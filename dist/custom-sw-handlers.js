self.addEventListener("message",(t=>{if(t.data&&"SHOW_NOTIFICATION"===t.data.type){const{title:i,options:n}=t.data.payload;t.waitUntil(self.registration.showNotification(i,n))}})),self.addEventListener("push",(t=>{const i=t.data?t.data.json():{},n=i.title||"Story berhasil dibuat",o={body:i.options?.body||"Anda telah membuat story baru",icon:"/favicon.png",badge:"/favicon.png",tag:"story-notification",renotify:!0,requireInteraction:!0,data:{url:i.url||"/"}};t.waitUntil(self.registration.showNotification(n,o))})),self.addEventListener("notificationclick",(t=>{t.notification.close();const i=t.notification.data?.url||"/";t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((t=>{for(let n=0;n<t.length;n++){const o=t[n];if(o.url===i&&"focus"in o)return o.focus()}if(clients.openWindow)return clients.openWindow(i)})))}));